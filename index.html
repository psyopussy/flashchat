<!DOCTYPE html>
<html>
  <head>
    <title>Chattert</title>
    <link rel="stylesheet" href="jspm_packages/github/twbs/bootstrap@3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!--/*
    loading/importing/installing sails.io.js natively in aurelia is not possible?
    alternatively we can use load the script versiobn oldskool way
    */-->
    <script type"text/javascript" src="assets/js/dependencies/sails.io.js"></script>
    <script type="text/javascript">
      io.sails.url = 'http://localhost:1337';
    </script>




  </head>

  <body aurelia-app>
    <script src="jspm_packages/system.js"></script>
    <script src="config.js"></script>
    <script>



      System.config({

      });
      SystemJS.import('aurelia-bootstrapper');

      io.socket.on('chatroom', function onServerSentEvent (msg) {
        // TODO: natively call populate function on activity

        // for now, the single most dirty hack in the history of all hacks:
        location.reload();
      });
        /*
      to prove that it works
      */
      io.socket.get('/chatroom', function gotResponse(body, response) {
        console.log('Current messages: ', body.messages);


      })


    </script>


  </body>
</html>
